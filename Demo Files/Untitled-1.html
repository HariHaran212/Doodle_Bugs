
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSV Data Graph</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h2>Average Values of Each Month from CSV File</h2>
    
    <!-- File input to load CSV -->
    <input type="file" id="csvFileInput" accept=".csv" />
    <input type="button" id="show" value="Show Graph"/>
    <!-- Canvas for chart -->
    <!-- <canvas id="myChart" width="400" height="200"></canvas> -->





    <button id="sendDataBtn">Send Data to Flask</button>

    <script>
        document.getElementById("sendDataBtn").addEventListener("click", function() {
            const data = {
                name: "John",
                age: 25
            };

            // Send data to the backend
            fetch('http://127.0.0.1:5000/submit-data', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            })
            .then(response => response.json())
            .then(result => {
                console.log('Success:', result);
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    </script>







    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.9.0/d3.min.js" integrity="sha512-vc58qvvBdrDR4etbxMdlTt4GBQk1qjvyORR2nrsPsFPyrs+/u5c3+1Ct6upOgdZoIl7eq6k3a1UPDSNAQi/32A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- <script src="https://cdn.jsdeliver.net/npm/chart.js"></script> -->
    <script>

        // document.getElementById('csvFileInput').addEventListener('change', function(event) {
        //     const file = event.target.files[0];
        // });
        // const chartData = "https://localhost";

        // d3.csv(charData).then(function(datapoints){
        //     console.log(datapoints);
        // });


    

        // Function to render chart using Chart.js
        // function renderChart(headers, averages) {
        //     const ctx = document.getElementById('myChart').getContext('2d');
        //     new Chart(ctx, {
        //         type: 'bar',  // You can change this to 'line', 'pie', etc.
        //         data: {
        //             labels: headers,  // Month names
        //             datasets: [{
        //                 label: 'Average Value per Month',
        //                 data: averages,  // Average values for each month
        //                 backgroundColor: 'rgba(75, 192, 192, 0.6)',
        //                 borderColor: 'rgba(75, 192, 192, 1)',
        //                 borderWidth: 1
        //             }]
        //         },
        //         options: {
        //             scales: {
        //                 y: {
        //                     beginAtZero: true
        //                 }
        //             }
        //         }
        //     });
        // }

        // // Function to handle CSV file upload
        // document.getElementById('show').addEventListener('click', function (event) {
            
        //     const file = document.getElementById('csvFileInput').files[0];
        //     console.log(file);
        //     // const file =  FileReader. readAsDataURL("data.csv");
        //     if (file) {
        //         const reader = new FileReader();
        //         reader.onload = function (e) {
        //             const csv = e.target.result;
        //             const { headers, averages } = calculateAverages(csv);
        //             console.log("Header");
        //             console.log(headers);
        //             renderChart(headers, averages);
        //         };
        //         reader.readAsText(file);
        //     } else {
        //         alert('No file selected!');
        //     }
        // });

        // function calculateAverages(csv) {
        //     const rows = csv.trim().split('\n');
        //     const headers = rows[0].split(',');
        //     const vals = [];
        //     const averages = {};

        //     // Initialize averages object
        //     headers.forEach(header => {
        //         averages[header] = 0;
        //         averages[header + "Count"] = 0;
        //     });
            
        //     // Calculate sums and counts for each column
        //     for (let i = 1; i < rows.length; i++) {
        //         vals[i-1].push(rows[i].split(","));
        //         // console.log("Next col");
        //     }
        //     for(let i = 0; i < vals[0].length; i++){
        //         for(let j = 0; j < rows.length; j++){
        //             averages[headers[i]]+=vals[i][j];
        //         }
        //         averages[header] = averages[header]/(rows.length-1);
        //     }
        //     // Calculate averages
        //     // for (const header in averages) {
        //     //     if (header.endsWith("Count")) continue;
        //     //     console.log(averages[header]);
        //     //     averages[header] /= averages[header + "Count"];
        //     // }

        //     return {headers, averages};
        // }
        
    </script>
</body>
</html>

